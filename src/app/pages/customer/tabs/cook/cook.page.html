<app-header></app-header>

<ion-content [fullscreen]="true" > 
  <ion-header collapse="condense" >
    <ion-toolbar>
      <ion-title class="ion-text-center" size="large">Créez votre pizza ici!</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-card>
    <img (click)="takePicture()" [src]="photo" />
    <ion-card-header>
      <ion-card-title><ion-input (ionChange)="changedTitle($event)" placeholder="Nom de la pizza"></ion-input></ion-card-title>
    </ion-card-header>
    <ion-card-content >
      <ion-textarea rows="4" (ionChange)="changedDescription($event)" placeholder="Description de la pizza"></ion-textarea>
      <ion-item>
        <ion-label position="fixed">Prix : </ion-label>
        <ion-input (ionChange)="changedPrice($event)" class="ion-text-end" type="number" inputmode="numeric" placeholder="exemple : 12"></ion-input>
        <ion-label slot="end">€</ion-label>
      </ion-item>
    </ion-card-content>
    <ion-card-content>
      <ion-card-subtitle class="ion-text-center" color="primary" >Ingredients</ion-card-subtitle>
      
      <ion-item>

        <ion-list>
          <ion-chip outline color="primary" *ngFor="let ingredient of ingredientsSelected">
            <ion-label >{{ingredient.name}}</ion-label>
            <ion-icon name="close-circle" (click)="removeIngredient(ingredient.id)" ></ion-icon>
          </ion-chip>
        </ion-list>
    
        <ion-icon slot="end" name="add-circle-outline" (click)="openModalHandler()"></ion-icon>
      </ion-item>
    </ion-card-content>
    <ion-button expand="block" class="ion-padding-horizontal" (click)="createPizza()">Créer la pizza</ion-button>
  </ion-card>

  <ion-modal [isOpen]="openModal">
    <ng-template>
      <ion-header >
            <ion-toolbar>
              <ion-title>Ingredient</ion-title>
              <ion-buttons slot="end">
                <ion-button (click)="dismissModalHandler()">Close</ion-button>
              </ion-buttons>
            </ion-toolbar>
          </ion-header>

          <ion-content [fullscreen]="true">
            <ion-text color="primary">
              <h3>Cochez tous les ingrédients que vous voulez</h3>
            </ion-text>

            <ion-list class="margin-bottom">
              <ion-item *ngFor="let ingredient of ingredients">
                <ion-label>{{ingredient.name}}</ion-label>
                <ion-checkbox slot="end" [(ngModel)]="ingredient.isChecked"></ion-checkbox>
              </ion-item>
            </ion-list>

          </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
